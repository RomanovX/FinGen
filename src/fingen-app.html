<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="fingen-app">
    <template>
        <style>
            :host {
                display: block;
                width: 100%;
                height: 100%;

                background:
                    radial-gradient(black 15%, transparent 16%) 0 0,
                    radial-gradient(black 15%, transparent 16%) 8px 8px,
                    radial-gradient(rgba(255,255,255,.1) 15%, transparent 20%) 0 1px,
                    radial-gradient(rgba(255,255,255,.1) 15%, transparent 20%) 8px 9px;
                background-color:#282828;
                background-size:16px 16px;

                font-family: 'Roboto', 'Noto', sans-serif;
                -webkit-font-smoothing: antialiased;
            }

            #page {
                display: table;
                position: fixed;
                top: 50%;
                left: 50%;
                -webkit-transform: translate(-50%, -50%);
                transform: translate(-50%, -50%);

                background-color: #ffffff;
                border-radius: 15px;

                border-spacing: 25px;
                border-collapse: separate;

                -moz-box-shadow:    inset 0 0 10px #000000;
                -webkit-box-shadow: inset 0 0 10px #000000;
                box-shadow:         inset 0 0 10px #000000;
            }

            #optionsContainer {
                display: table-cell;
            }

            #songContainer {
                display: block;
                max-width: 400px;
                max-height: 200px;

                background-color: lightgrey;
                border-radius: 10px;
                border: 4px ridge white;

                overflow-y: auto;
                white-space: nowrap;

                padding: 3px;
            }

            .song {
                display: block;
                box-sizing: border-box;

                background-color: white;
                border-radius: 10px;

                margin-bottom: 3px;

                min-height: 30px;
                height: 30px;
                overflow: hidden;
                text-overflow: ellipsis;

                line-height: 30px;
            }

            .reorder {
                cursor: move;
                cursor: grab;
                cursor: -webkit-grab;
            }

            .reorderIcon {
                height: 20px;
                width: 20px;
                margin-right: 10px;
                color: darkgrey;
            }

        </style>
        <div id="page">
            <div id="songContainer">
                <template is="dom-repeat" items="{{mockSongs}}">
                    <paper-item class="reorder song">
                        <iron-icon class="reorderIcon" icon="icons:reorder"></iron-icon>     {{item.title}}
                    </paper-item>
                </template>
            </div>
            <div id="optionsContainer">
                <div>Length of songs: [[textualSongLength]]</div>
                <paper-slider min="60" max="150" value="105" immediate-value="{{songLength}}"></paper-slider>
            </div>
        </div>
    </template>

    <script>
        Polymer({
            is: 'fingen-app',

            properties: {
                songLength: {
                    type: Number,
                    value: 105,
                    notify: true
                },

                textualSongLength: {
                    type: String,
                    computed: '_computeTextualSongLength(songLength)'
                }
            },

            ready: function() {
                this.mockSongs = [
                    {
                        title: 'This is a nice waltz'
                    },
                    {
                        title: 'This is a nice tango'
                    },
                    {
                        title: 'This is a nice viennese waltz'
                    },
                    {
                        title: 'This is a nice slow foxtrot'
                    },
                    {
                        title: 'This is a nice quickstep'
                    },
                    {
                        title: 'This is a song with a really long title that doesn\'t really do any justice other than see whether the overflow works.'
                    }
                ];

                Sortable.create(this.$.songContainer, {
                    animation: 150,
                    cursor: 'move'
                });
            },

            _computeTextualSongLength: function(songLength) {
                var minutes = Math.floor(songLength / 60);
                var seconds = songLength % 60;
                if (seconds < 10) {
                    seconds = '0' + seconds;
                }
                return minutes + ':' + seconds
            }

        });
    </script>
</dom-module>